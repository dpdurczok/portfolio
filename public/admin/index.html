<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="robots" content="noindex" />
    <title>Content Manager</title>
  </head>
  <body>
    <!-- 1) Tell Decap NOT to auto-load /admin/config.yml -->
    <script>window.CMS_MANUAL_INIT = true;</script>

    <!-- 2) Load Decap -->
    <script src="https://unpkg.com/decap-cms@^3.1.2/dist/decap-cms.js"></script>

    <!-- 3) Single, clean CMS.init with unique collection names -->
    <script>
      CMS.init({
        config: {
          publish_mode: "editorial_workflow",
          backend: {
            name: "github",
            repo: "dpdurczok/portfolio",
            branch: "main",
            base_url: "https://u07fwuovdf.execute-api.us-east-1.amazonaws.com", // <-- your API base
            auth_endpoint: "/auth"
          },
          media_folder: "public/assets/uploads",
          public_folder: "/assets/uploads",

          collections: [
            {
              name: "art",               /* UNIQUE */
              label: "Art Projects",
              files: [
                {
                  file: "src/content/art.json",
                  label: "Art Projects",
                  name: "art_items",     /* UNIQUE */
                  format: "json",
                  fields: [
                    {
                      label: "Art Projects",
                      name: "items",
                      widget: "list",
                      summary: "{{fields.title}} ({{fields.year}})",
                      fields: [
                        { label: "Title", name: "title", widget: "string" },
                        { label: "Year", name: "year", widget: "number", required: false },
                        { label: "Blurb", name: "blurb", widget: "text", required: false },
                        { label: "Image", name: "image", widget: "image" },
                        { label: "Video URL", name: "video", widget: "string", required: false },
                        { label: "Video file", name: "videoFile", widget: "file", required: false },
                        { label: "Tags", name: "tags", widget: "list", required: false }
                      ]
                    }
                  ]
                }
              ]
            },

            {
              name: "jobs",              /* UNIQUE */
              label: "Job Projects",
              files: [
                {
                  file: "src/content/jobs.json",
                  label: "Job Projects",
                  name: "job_items",     /* UNIQUE */
                  format: "json",
                  fields: [
                    {
                      label: "Job Projects",
                      name: "items",
                      widget: "list",
                      summary: "{{fields.title}} ({{fields.year}})",
                      fields: [
                        { label: "Title", name: "title", widget: "string" },
                        { label: "Year", name: "year", widget: "number", required: false },
                        { label: "Blurb", name: "blurb", widget: "text", required: false },
                        { label: "Image", name: "image", widget: "image" },
                        { label: "Video URL", name: "video", widget: "string", required: false },
                        { label: "Video file", name: "videoFile", widget: "file", required: false },
                        { label: "Tags", name: "tags", widget: "list", required: false }
                      ]
                    }
                  ]
                }
              ]
            },

            {
              name: "games",             /* UNIQUE */
              label: "Games",
              files: [
                {
                  file: "src/content/games.json",
                  label: "Games",
                  name: "game_items",    /* UNIQUE */
                  format: "json",
                  fields: [
                    {
                      label: "Games",
                      name: "items",
                      widget: "list",
                      summary: "{{fields.title}} ({{fields.year}})",
                      fields: [
                        { label: "Title", name: "title", widget: "string" },
                        { label: "Year", name: "year", widget: "number", required: false },
                        { label: "Blurb", name: "blurb", widget: "text", required: false },
                        { label: "Image", name: "image", widget: "image" },
                        { label: "Link (URL or /route)", name: "link", widget: "string", required: false },
                        { label: "Use HashRouter for this link?", name: "hashRouter", widget: "boolean", required: false, default: false },
                        { label: "Link text", name: "linktext", widget: "string", required: false, default: "Learn More" },
                        { label: "Tags", name: "tags", widget: "list", required: false }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      });
    </script>
  </body>
</html>
